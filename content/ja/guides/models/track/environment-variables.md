---
title: Environment variables
description: W&B の 環境変数 を設定します。
menu:
  default:
    identifier: ja-guides-models-track-environment-variables
    parent: experiments
weight: 9
---

自動化された環境でスクリプトを実行している場合、スクリプトの実行前またはスクリプト内で設定された環境変数を使用して、 **wandb** を制御できます。

```bash
# これは秘密であり、バージョン管理にチェックインすべきではありません
WANDB_API_KEY=$YOUR_API_KEY
# 名前とメモはオプション
WANDB_NAME="My first run"
WANDB_NOTES="Smaller learning rate, more regularization."
```

```bash
# wandb/settings ファイルをチェックインしない場合にのみ必要
WANDB_ENTITY=$username
WANDB_PROJECT=$project
```

```python
# スクリプトをクラウドに同期させたくない場合
os.environ["WANDB_MODE"] = "offline"

# sweep ID のトラッキングを Run オブジェクトと関連クラスに追加
os.environ["WANDB_SWEEP_ID"] = "b05fq58z"
```

## オプションの環境変数

これらのオプションの環境変数を使用して、リモートマシンでの認証の設定などを行います。

| 変数名                      | 使用法                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| --------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **WANDB_ANONYMOUS**        | これを `allow` 、 `never` 、または `must` に設定して、 ユーザー が秘密の URL を持つ匿名 run を作成できるようにします。                                                                                                                                                                                                                                                                                                                                                                                                    |
| **WANDB_API_KEY**          | アカウントに関連付けられた 認証 キーを設定します。キーは、 [設定ページ](https://app.wandb.ai/settings) にあります。リモートマシンで `wandb login` が実行されていない場合は、これを設定する必要があります。                                                                                                                                                                                                                                                                                                                                    |
| **WANDB_BASE_URL**         | [wandb/local]({{< relref path="/guides/hosting/" lang="ja" >}}) を使用している場合は、この環境変数を `http://YOUR_IP:YOUR_PORT` に設定する必要があります。                                                                                                                                                                                                                                                                                                                                                                                |
| **WANDB_CACHE_DIR**        | これはデフォルトで \~/.cache/wandb になっています。この場所は、この環境変数でオーバーライドできます。                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **WANDB_CONFIG_DIR**       | これはデフォルトで \~/.config/wandb になっています。この場所は、この環境変数でオーバーライドできます。                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **WANDB_CONFIG_PATHS**     | wandb.config に読み込む yaml ファイルのコンマ区切りリスト。[config]({{< relref path="./config.md#file-based-configs" lang="ja" >}}) を参照してください。                                                                                                                                                                                                                                                                                                                                                                                 |
| **WANDB_CONSOLE**          | これを "off" に設定すると、stdout/stderr ログが無効になります。デフォルトでは、サポートされている 環境 で "on" に設定されています。                                                                                                                                                                                                                                                                                                                                                                                                |
| **WANDB_DIR**              | これを絶対パスに設定すると、 トレーニング スクリプトに対する _wandb_ ディレクトリーではなく、生成されたすべてのファイルがここに保存されます。_このディレクトリーが存在し、 プロセス が実行されている ユーザー がそこに書き込むことができることを確認してください_。これは、ダウンロードされた Artifacts の場所に影響を与えないことに注意してください。代わりに _WANDB_ARTIFACT_DIR_ を使用して設定できます。                                                                                                                                                                                                                           |
| **WANDB_ARTIFACT_DIR**     | これを絶対パスに設定すると、 トレーニング スクリプトに対する _artifacts_ ディレクトリーではなく、ダウンロードされたすべての Artifacts がここに保存されます。このディレクトリーが存在し、 プロセス が実行されている ユーザー がそこに書き込むことができることを確認してください。これは、生成された メタデータ ファイルの場所に影響を与えないことに注意してください。代わりに _WANDB_DIR_ を使用して設定できます。                                                                                                                                                                                        |
| **WANDB_DISABLE_GIT**      | wandb が git リポジトリーをプローブして、最新の コミット /差分をキャプチャするのを防ぎます。                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **WANDB_DISABLE_CODE**     | これを true に設定すると、wandb が ノートブック または git の差分を保存しなくなります。git リポジトリーにいる場合は、現在の コミット を保存します。                                                                                                                                                                                                                                                                                                                                                                                         |
| **WANDB_DOCKER**           | これを docker イメージ ダイジェスト に設定すると、runs の復元が有効になります。これは、wandb docker コマンド で自動的に設定されます。`wandb docker my/image/name:tag --digest` を実行して、 イメージ ダイジェスト を取得できます。                                                                                                                                                                                                                                                                                                                                                                                            |
| **WANDB_ENTITY**           | run に関連付けられた Entity 。 トレーニング スクリプトのディレクトリーで `wandb init` を実行すると、 _wandb_ という名前のディレクトリーが作成され、 ソース コード管理 にチェックインできるデフォルトの Entity が保存されます。そのファイルを作成したくない場合、またはファイルをオーバーライドしたい場合は、環境変数を使用できます。                                                                                                                                                                                                                                                                                                   |
| **WANDB_ERROR_REPORTING** | これを false に設定すると、wandb が重大なエラーをエラー追跡システムに ログ 記録しなくなります。                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| **WANDB_HOST**             | システムが提供する ホスト名 を使用したくない場合は、wandb インターフェースに表示する ホスト名 にこれを設定します。                                                                                                                                                                                                                                                                                                                                                                                                                         |
| **WANDB_IGNORE_GLOBS**     | これを無視するファイル glob のコンマ区切りリストに設定します。これらのファイルは クラウド に同期されません。                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **WANDB_JOB_NAME**         | `wandb` によって作成された ジョブ の名前を指定します。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **WANDB_JOB_TYPE**         | run のさまざまなタイプを示すために、"training" や "evaluation" などの ジョブタイプ を指定します。詳細については、[grouping]({{< relref path="/guides/models/track/runs/grouping.md" lang="ja" >}}) を参照してください。                                                                                                                                                                                                                                                                                                                                                                                                            |
| **WANDB_MODE**             | これを "offline" に設定すると、wandb は run の メタデータ をローカルに保存し、 サーバー に同期しません。これを `disabled` に設定すると、wandb は完全にオフになります。                                                                                                                                                                                                                                                                                                                                                                       |
| **WANDB_NAME**             | run の人間が読める名前。設定されていない場合は、ランダムに生成されます。                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| **WANDB_NOTEBOOK_NAME**    | jupyter で実行している場合は、この変数で ノートブック の名前を設定できます。自動検出を試みます。                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **WANDB_NOTES**            | run に関するより長いメモ。 Markdown が許可されており、UI で後で編集できます。                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| **WANDB_PROJECT**          | run に関連付けられた Project 。これは `wandb init` で設定することもできますが、環境変数が 値 をオーバーライドします。                                                                                                                                                                                                                                                                                                                                                                                                                    |
| **WANDB_RESUME**           | デフォルトでは、これは _never_ に設定されています。_auto_ に設定すると、wandb は失敗した run を自動的に再開します。_must_ に設定すると、起動時にrun が存在する必要があります。常に独自の 一意 の ID を生成する場合は、これを _allow_ に設定し、常に **WANDB_RUN_ID** を設定します。                                                                                                                                                                                                                                                                                                                                             |
| **WANDB_RUN_GROUP**        | run を自動的にグループ化するために、 experiment 名を指定します。詳細については、[grouping]({{< relref path="/guides/models/track/runs/grouping.md" lang="ja" >}}) を参照してください。                                                                                                                                                                                                                                                                                                                                                                                                            |
| **WANDB_RUN_ID**           | スクリプトの単一のrun に対応する、（ Project ごとに）グローバルに 一意 の 文字列 にこれを設定します。64 文字以下でなければなりません。単語以外の文字はすべてダッシュに変換されます。これは、障害が発生した場合に既存のrun を再開するために使用できます。                                                                                                                                                                                                                                                                                                                                                                                        |
| **WANDB_SILENT**           | wandb の ログ ステートメントを非表示にするには、これを **true** に設定します。これが設定されている場合、すべての ログ は **WANDB_DIR**/debug.log に書き込まれます。                                                                                                                                                                                                                                                                                                                                                                                                                            |
| **WANDB_SHOW_RUN**         | オペレーティング システム がサポートしている場合は、run の URL を使用して ブラウザー を自動的に開くには、これを **true** に設定します。                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| **WANDB_SWEEP_ID**         | sweep ID のトラッキングを `Run` オブジェクトと関連クラスに追加し、UI に表示します。                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| **WANDB_TAGS**             | run に適用する タグ のコンマ区切りリスト。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| **WANDB_USERNAME**         | run に関連付けられた Team のメンバーの ユーザー 名。これは、サービスアカウント APIキー とともに使用して、自動化されたrun の 属性 を Team のメンバーに付与できます。                                                                                                                                                                                                                                                                                                                                                                                                                          |
| **WANDB_USER_EMAIL**       | run に関連付けられた Team のメンバーの メール 。これは、サービスアカウント APIキー とともに使用して、自動化されたrun の 属性 を Team のメンバーに付与できます。                                                                                                                                                                                                                                                                                                                                                                                                                           |

## Singularity 環境

[Singularity](https://singularity.lbl.gov/index.html) で コンテナ を実行している場合は、上記の変数の前に **SINGULARITYENV_** を付けることで、環境変数を渡すことができます。Singularity 環境変数の詳細については、[こちら](https://singularity.lbl.gov/docs-environment-metadata#environment) を参照してください。

## AWS での実行

AWS で バッチ ジョブ を実行している場合は、W&B 認証 情報 でマシンを簡単に認証できます。[設定ページ](https://app.wandb.ai/settings) から APIキー を取得し、[AWS バッチ ジョブ 仕様](https://docs.aws.amazon.com/batch/latest/userguide/job_definition_parameters.html#parameters) で WANDB_API_KEY 環境変数を設定します。
