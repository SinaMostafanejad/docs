---
title: Parameter importance
description: モデルの ハイパーパラメーター と出力 メトリクス の関係を可視化します。
menu:
  default:
    identifier: ja-guides-models-app-features-panels-parameter-importance
    parent: panels
weight: 60
---

どのハイパーパラメータが最も優れた予測因子であり、メトリクスの望ましい値と高い相関関係にあるかを発見します。

{{< img src="/images/general/parameter-importance-1.png" alt="" >}}

**相関** は、ハイパーパラメータと選択されたメトリクス (この場合は val_loss) の間の線形相関です。したがって、高い相関は、ハイパーパラメータが高い値を持つ場合、メトリクスも高い値を持つことを意味し、その逆もまた然りです。相関は調べるのに最適なメトリクスですが、入力間の二次的な相互作用を捉えることができず、大きく異なる範囲の入力を比較するのが面倒になる可能性があります。

したがって、W&B は **重要度** メトリクスも計算します。W&B は、ハイパーパラメータを入力として、メトリクスをターゲット出力として ランダムフォレスト をトレーニングし、 ランダムフォレスト の特徴量の重要度の値をレポートします。

この手法のアイデアは、[Jeremy Howard](https://twitter.com/jeremyphoward) との会話からインスピレーションを得たもので、彼は [Fast.ai](http://fast.ai) でハイパーパラメータ空間を調査するために ランダムフォレスト の特徴量の重要度の使用を開拓しました。W&B は、この 分析 の背後にある動機について詳しく学ぶために、この [レクチャー](http://course18.fast.ai/lessonsml1/lesson4.html) (およびこれらの [ノート](https://forums.fast.ai/t/wiki-lesson-thread-lesson-4/7540)) をチェックすることを強くお勧めします。

ハイパーパラメータの重要度 パネル は、高度に相関するハイパーパラメータ間の複雑な相互作用を解きほぐします。そうすることで、モデル のパフォーマンスの予測に関してどのハイパーパラメータが最も重要かを示すことで、ハイパーパラメータ検索を微調整するのに役立ちます。

## ハイパーパラメータの重要度 パネル の作成

1. W&B の プロジェクト に移動します。
2. [**Add panels**] ボタンを選択します。
3. [**CHARTS**] ドロップダウンを展開し、ドロップダウンから [**Parallel coordinates**] を選択します。

{{% alert %}}
空の パネル が表示される場合は、run がグループ化されていないことを確認してください
{{% /alert %}}

{{< img src="/images/app_ui/hyperparameter_importance_panel.gif" alt="Using automatic parameter visualization" >}}

パラメータ マネージャーを使用すると、表示および非表示の パラメータ を手動で設定できます。

{{< img src="/images/app_ui/hyperparameter_importance_panel_manual.gif" alt="Manually setting the visible and hidden fields" >}}

## ハイパーパラメータの重要度 パネル の解釈

{{< img src="/images/general/parameter-importance-4.png" alt="" >}}

この パネル には、トレーニング スクリプト の [wandb.config]({{< relref path="/guides/models/track/config/" lang="ja" >}}) オブジェクト に渡されたすべての パラメータ が表示されます。次に、これらの config パラメータ の特徴量の重要度と相関関係が、選択した モデル メトリクス (この場合は `val_loss`) に関連して表示されます。

### 重要度

重要度の列には、選択した メトリクス の予測に各ハイパーパラメータがどの程度役立ったかが表示されます。多数のハイパーパラメータの チューニング を開始し、このプロット を使用して、さらに調査する価値のあるハイパーパラメータを絞り込むシナリオを想像してください。後続の Sweeps は、最も重要なハイパーパラメータに限定できるため、より優れた モデル をより速く、より安価に見つけることができます。

{{% alert %}}
W&B は、 ツリー ベース の モデル を使用して重要度を計算します。これは、線形 モデル よりも、カテゴリ データ と正規化されていないデータの両方に対して寛容であるためです。
{{% /alert %}}

上の図では、`epochs, learning_rate, batch_size` および `weight_decay` がかなり重要であることがわかります。

### 相関

相関は、個々のハイパーパラメータと メトリクス 値の間の線形関係を捉えます。それらは、SGD オプティマイザー などのハイパーパラメータを使用することと `val_loss` の間に有意な関係があるかどうかという質問に答えます (この場合の答えはイエスです)。相関値の範囲は -1 から 1 で、正の値は正の線形相関を表し、負の値は負の線形相関を表し、0 の値は相関がないことを表します。一般に、どちらかの方向に 0.7 より大きい値は強い相関を表します。

このグラフを使用して、メトリクス との相関が高い値をさらに調べたり (この場合は、確率的勾配降下法または adam を rmsprop または nadam よりも選択する場合があります)、より多くの エポック で トレーニング したりできます。

{{% alert %}}
* 相関関係は、必ずしも因果関係ではなく、関連性の証拠を示しています。
* 相関関係は外れ値に敏感です。特に、試行されたハイパーパラメータのサンプル サイズが小さい場合、強い関係が中程度の関係に変わる可能性があります。
* 最後に、相関関係はハイパーパラメータと メトリクス の間の線形関係のみを捉えます。強い多項式関係がある場合、それは相関関係によって捉えられません。
{{% /alert %}}

重要度と相関関係の格差は、重要度がハイパーパラメータ間の相互作用を考慮するのに対し、相関関係は個々のハイパーパラメータが メトリクス 値に与える影響のみを測定するという事実に起因します。次に、相関関係は線形関係のみを捉えるのに対し、重要度はより複雑な関係を捉えることができます。

ご覧のとおり、重要度と相関関係はどちらも、ハイパーパラメータが モデル のパフォーマンスにどのように影響するかを理解するための強力な ツール です。
