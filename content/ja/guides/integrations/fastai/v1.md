---
title: fastai v1
menu:
  default:
    identifier: ja-guides-integrations-fastai-v1
    parent: fastai
---

{{% alert %}}
このドキュメントは fastai v1 用です。
現在のバージョンの fastai を使用している場合は、[fastai のページ]({{< relref path="../" lang="ja" >}})を参照してください。
{{% /alert %}}

fastai v1 を使用するスクリプトの場合、モデルのトポロジー、損失、メトリクス、重み、勾配、サンプル予測、および最適なトレーニング済みモデルを自動的にログに記録できる コールバック があります。

```python
import wandb
from wandb.fastai import WandbCallback

wandb.init()

learn = cnn_learner(data, model, callback_fns=WandbCallback)
learn.fit(epochs)
```

リクエストされたログデータは、 コールバック コンストラクターを介して構成可能です。

```python
from functools import partial

learn = cnn_learner(
    data, model, callback_fns=partial(WandbCallback, input_type="images")
)
```

トレーニング の開始時にのみ `WandbCallback` を使用することも可能です。この場合、インスタンス化する必要があります。

```python
learn.fit(epochs, callbacks=WandbCallback(learn))
```

カスタム パラメータ は、その段階で指定することもできます。

```python
learn.fit(epochs, callbacks=WandbCallback(learn, input_type="images"))
```

## コード 例

インテグレーション の仕組みを確認するための例をいくつか作成しました。

**Fastai v1**

* [シンプソンズのキャラクターを分類する](https://github.com/borisdayma/simpsons-fastai)[: ](https://app.wandb.ai/jxmorris12/huggingface-demo/reports/A-Step-by-Step-Guide-to-Tracking-Hugging-Face-Model-Performance--VmlldzoxMDE2MTU)Fastai モデル を追跡および比較するためのシンプルな デモ
* [Fastai を使用した セマンティックセグメンテーション](https://github.com/borisdayma/semantic-segmentation): 自動運転車で ニューラルネットワーク を最適化する

## オプション

`WandbCallback()` クラスは、多数のオプションをサポートしています。

| キーワード 引数 | デフォルト | 説明                                                                                                   |
| :--------------- | :------- | :----------------------------------------------------------------------------------------------------- |
| learn            | N/A      | フック する fast.ai の学習器。                                                                         |
| save_model       | True     | 各ステップで改善された場合、 モデル を保存します。トレーニング の最後に最適な モデル もロードします。 |
| mode             | auto     | `min`、`max`、または `auto`: ステップ間で `monitor` で指定された トレーニング メトリクス を比較する方法。 |
| monitor          | None     | 最高の モデル を保存するためのパフォーマンスを測定するために使用される トレーニング メトリクス。None はデフォルトで検証損失になります。                                     |
| log              | gradients| `gradients`、`parameters`、`all`、または None。損失と メトリクス は常にログに記録されます。                                      |
| input_type       | None     | `images` または `None`。サンプル 予測 を表示するために使用されます。                                                    |
| validation_data  | None     | `input_type` が設定されている場合、サンプル 予測 に使用される データ。                                                   |
| predictions      | 36       | `input_type` が設定され、`validation_data` が `None` の場合に行う 予測 の数。                                                |
| seed             | 12345    | `input_type` が設定され、`validation_data` が `None` の場合、サンプル 予測 用の乱数 ジェネレーターを初期化します。                               |
